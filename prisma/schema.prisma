// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}


model users {
  id                Int                 @id @default(autoincrement()) 
  username          String              @unique(map: "name") 
  password          String  
  role              String              @default("responsable")        
  sport             sport[]             @relation("sport-acc")

}

model sport {
  id                Int                 @id @default(autoincrement())
  name              String              
  city              String  
  accid             Int
  acc               users               @relation("sport-acc",fields: [accid], references: [id], onDelete: Cascade)
  responsables      person[]            @relation("sport-respo")
  article           article[]           @relation("sport-article")
  evenement         evenement[]         @relation("sport-evenement")
  plan              sport_plan[]        
  @@unique([name,city]) 
}

model sport_plan {
  id                Int                 @id @default(autoincrement())
  sportid           Int
  planid            Int
  sport             sport               @relation(fields: [sportid], references: [id], onDelete: Cascade) 
  plan              plan                @relation(fields: [planid], references: [id], onDelete: Cascade) 
}

model plan {
  id                Int                 @id @default(autoincrement())
  date              String              
  time              String  
  lieu              String  
  sport             sport_plan[]
}

model article {
  id                Int                 @id @default(autoincrement())
  title             String
  categoryid        Int
  category          sport               @relation("sport-article",fields: [categoryid], references: [id], onDelete: Cascade)   
  description       String
  image             String               
}

model evenement {
  id                Int                 @id @default(autoincrement())
  title             String
  categoryid        Int
  category          sport               @relation("sport-evenement",fields: [categoryid], references: [id], onDelete: Cascade)   
  plan              String?             
}

model person {
  id                Int                 @id @default(autoincrement())
  name              String              
  email             String  
  image             String?
  sportid           Int?
  sport             sport?               @relation("sport-respo",fields: [sportid], references: [id], onDelete: Cascade)   
}
