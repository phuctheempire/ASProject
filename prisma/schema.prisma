// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model users {
  id                Int                 @id @default(autoincrement()) 
  username          String              @unique(map: "name") 
  password          String  
  role              String              @default("responsable")        
  sport             sport[]             @relation("sport-acc")

}

model sport {
  id                Int                 @id @default(autoincrement())
  name              String              
  city              String  
  accid             Int
  acc               users               @relation("sport-acc",fields: [accid], references: [id], onDelete: Cascade)
  responsables      SportResponsable[]
  article           article[]           @relation("sport-article")
  evenement         evenement[]         @relation("sport-evenement")
  //plan
  @@unique([name,city]) 
}


model article {
  id                Int                 @id @default(autoincrement())
  title             String
  categoryid        Int
  category          sport               @relation("sport-article",fields: [categoryid], references: [id], onDelete: Cascade)   
  description       String
  image             String               
}

model evenement {
  id                Int                 @id @default(autoincrement())
  title             String
  categoryid        Int
  category          sport               @relation("sport-evenement",fields: [categoryid], references: [id], onDelete: Cascade)   
  hours_date        DateTime
  place             String               
}

model person {
  id                Int                 @id @default(autoincrement())
  name              String              
  email             String  
  sport             SportResponsable[] 
  //plan
}


model SportResponsable {
  id                Int                 @id @default(autoincrement())
  sportid           Int
  personid          Int
  sport             sport               @relation(fields: [sportid], references: [id], onDelete: Cascade)
  person            person              @relation(fields: [personid], references: [id], onDelete: Cascade)
  @@unique([sportid, personid])
}